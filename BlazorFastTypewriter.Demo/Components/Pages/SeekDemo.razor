@page "/seek"
@using BlazorFastTypewriter

<PageTitle>Seek & Scrubbing - BlazorFastTypewriter</PageTitle>

<div class="page-header">
    <h1>Seek & Scrubbing</h1>
    <p class="page-subtitle">Jump to any position in the animation with interactive controls</p>
</div>

<section class="demo-section">
    <h2>Interactive Seek Control</h2>
    <p>Jump to any position in the animation with seek functionality, perfect for progress bar scrubbing and interactive controls.</p>
    
    <div class="player-container">
        <div class="demo-preview">
            <Typewriter @ref="_seekTypewriter"
                        Autostart="false"
                        Speed="60"
                        OnSeek="HandleSeek"
                        OnProgress="HandleSeekProgress"
                        OnComplete="HandleSeekComplete">
                <div>
                    <h3>Seek Demo</h3>
                    <p>Use the progress bar scrubber or buttons below to jump to any position. Hover over the animation to reveal playback controls!</p>
                    <p>This is perfect for:</p>
                    <ul>
                        <li><strong>Progress bar scrubbing</strong> - drag to any position</li>
                        <li><strong>Quick navigation</strong> - jump to specific points</li>
                        <li><strong>State restoration</strong> - resume from saved position</li>
                        <li><strong>Interactive tutorials</strong> - let users control pacing</li>
                    </ul>
                </div>
            </Typewriter>
        </div>
        
        <TypewriterControls 
            Overlay="true"
            IsRunning="_seekRunning"
            IsPaused="_seekPaused"
            Progress="_seekInfo"
            ShowProgress="true"
            ShowPlayPause="true"
            ShowReset="true"
            ShowStop="false"
            ShowSkipEnd="false"
            SeekEnabled="true"
            CanPlay="!_seekRunning"
            CanPause="_seekRunning && !_seekPaused"
            CanResume="_seekPaused"
            CanReset="true"
            OnPlayClick="StartSeek"
            OnPauseClick="PauseSeek"
            OnResumeClick="ResumeSeek"
            OnResetClick="ResetSeek"
            OnSeekChange="HandleSeekFromControls" />
        
        <div class="seek-buttons">
            <button @onclick="() => SeekToPosition(0)">0%</button>
            <button @onclick="() => SeekToPosition(0.25)">25%</button>
            <button @onclick="() => SeekToPosition(0.5)">50%</button>
            <button @onclick="() => SeekToPosition(0.75)">75%</button>
            <button @onclick="() => SeekToPosition(1)">100%</button>
        </div>
    </div>
    
    <CodeSample>
        <pre><code class="language-xml">&lt;Typewriter @@ref="_typewriter"
            OnSeek="HandleSeek"
            OnProgress="HandleProgress"&gt;
    &lt;p&gt;Content...&lt;/p&gt;
&lt;/Typewriter&gt;

&lt;input type="range" 
       min="0" max="100" 
       value="@@_position" 
       @@oninput="HandleSeekInput" /&gt;

&lt;button @@onclick="() =&gt; SeekTo(0.5)"&gt;Jump to 50%&lt;/button&gt;

@@code {
    private Typewriter? _typewriter;
    private double _position = 0;
    
    private async Task HandleSeekInput(ChangeEventArgs e)
    {
        if (double.TryParse(e.Value?.ToString(), out var value))
        {
            _position = value;
            await _typewriter?.SeekToPercent(value);
        }
    }
    
    private async Task SeekTo(double position)
    {
        await _typewriter?.Seek(position);
    }
    
    private void HandleSeek(TypewriterSeekEventArgs args)
    {
        _position = args.Position * 100;
        Console.WriteLine($"Seeked to {args.Percent:F1}%");
    }
    
    private void HandleProgress(TypewriterProgressEventArgs args)
    {
        _position = args.Percent;
    }
}</code></pre>
    </CodeSample>
</section>
