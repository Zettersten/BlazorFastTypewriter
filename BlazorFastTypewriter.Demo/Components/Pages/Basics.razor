@page "/basics"
@using BlazorFastTypewriter

<PageTitle>Basics - BlazorFastTypewriter</PageTitle>

<div class="page-header">
    <h1>Basic Usage</h1>
    <p class="page-subtitle">Get started with simple typewriter animations</p>
</div>

<section class="demo-section">
    <h2>Simple Example</h2>
    <p>Get started with a simple typewriter animation. The component automatically starts when the page loads.</p>
    
    <div class="player-container">
        <TypewriterControls 
            Overlay="false"
            IsRunning="_basicRunning"
            IsPaused="_basicPaused"
            Progress="_basicProgress"
            ShowProgress="true"
            ShowPlayPause="true"
            ShowReset="true"
            CanPlay="!_basicRunning"
            CanPause="_basicRunning && !_basicPaused"
            CanResume="_basicPaused"
            CanReset="true"
            OnPlayClick="StartBasic"
            OnPauseClick="PauseBasic"
            OnResumeClick="ResumeBasic"
            OnResetClick="ResetBasic" />
        
        <div class="demo-preview">
            <Typewriter @ref="_basicTypewriter"
                        Autostart="false"
                        Speed="60"
                        OnComplete="HandleBasicComplete"
                        OnProgress="HandleBasicProgress">
                <p>This is a <strong>simple example</strong> of the typewriter component. It types character by character, preserving <em>formatting</em> and <a href="#">links</a>.</p>
            </Typewriter>
        </div>
    </div>
    
    <CodeSample>
        <pre><code class="language-xml">&lt;Typewriter Speed="60" Autostart="false"&gt;
    &lt;p&gt;This is a &lt;strong&gt;simple example&lt;/strong&gt; of the typewriter component.&lt;/p&gt;
&lt;/Typewriter&gt;</code></pre>
    </CodeSample>
</section>

<section class="demo-section">
    <h2>Performance: Render Batching</h2>
    <p>
        For long content, set <code>RenderBatchSize</code> to render every N characters instead of every character.
        This reduces allocations and render overhead (at the cost of less granular updates).
    </p>
    
    <div class="player-container">
        <div class="demo-preview">
            <Typewriter @ref="_batchTypewriter"
                        Autostart="false"
                        Speed="120"
                        MinDuration="0"
                        RenderBatchSize="@_renderBatchSize"
                        OnComplete="HandleBatchComplete">
                <p>
                    This demo types a longer message to make the difference visible. Increase <code>RenderBatchSize</code>
                    to reduce UI updates and improve throughput when animating large HTML payloads.
                </p>
            </Typewriter>
        </div>
        
        <div style="display: flex; gap: 0.75rem; align-items: center; flex-wrap: wrap;">
            <button @onclick="StartBatch" disabled="@_batchRunning">Start</button>
            <button @onclick="ResetBatch">Reset</button>
            
            <label style="display: inline-flex; gap: 0.5rem; align-items: center;">
                <span><strong>RenderBatchSize</strong>: @_renderBatchSize</span>
                <input type="range"
                       min="1"
                       max="20"
                       step="1"
                       value="@_renderBatchSize"
                       @oninput="HandleRenderBatchSizeInput" />
            </label>
        </div>
    </div>

    <CodeSample>
        <pre><code class="language-xml">&lt;Typewriter RenderBatchSize="10" Speed="120"&gt;
    &lt;p&gt;Longer content...&lt;/p&gt;
&lt;/Typewriter&gt;</code></pre>
    </CodeSample>
</section>

<section class="demo-section">
    <h2>Speed Control</h2>
    <p>Control the typing speed using the <code>Speed</code> parameter (characters per second). Adjust the slider to see different speeds.</p>
    
    <div class="player-container">
        <TypewriterControls 
            Overlay="false"
            IsRunning="_speedRunning"
            IsPaused="_speedPaused"
            Progress="_speedProgress"
            ShowProgress="true"
            ShowPlayPause="true"
            ShowReset="true"
            ShowSpeed="true"
            SpeedMin="20"
            SpeedMax="200"
            SpeedStep="10"
            CurrentSpeed="_speed"
            CanPlay="!_speedRunning"
            CanPause="_speedRunning && !_speedPaused"
            CanResume="_speedPaused"
            CanReset="true"
            OnPlayClick="StartSpeed"
            OnPauseClick="PauseSpeed"
            OnResumeClick="ResumeSpeed"
            OnResetClick="ResetSpeed"
            OnSpeedChange="HandleSpeedChangeFromControls" />
        
        <div class="demo-preview">
            <Typewriter @ref="_speedTypewriter"
                        Autostart="false"
                        Speed="@_speed"
                        OnComplete="HandleSpeedComplete"
                        OnProgress="HandleSpeedProgress">
                <p>Watch how the typing speed changes as you adjust the slider. This demonstrates the <code>Speed</code> parameter in action.</p>
            </Typewriter>
        </div>
    </div>
    
    <CodeSample>
        <pre><code class="language-xml">&lt;Typewriter Speed="@_speed"&gt;
    &lt;p&gt;Content here...&lt;/p&gt;
&lt;/Typewriter&gt;

@@code {
    private int _speed = 100; // Characters per second
}</code></pre>
    </CodeSample>
</section>

<section class="demo-section">
    <h2>HTML & Formatting Support</h2>
    <p>The component preserves HTML structure, including headings, lists, links, code blocks, and nested elements.</p>
    
    <div class="player-container">
        <TypewriterControls 
            Overlay="false"
            IsRunning="_htmlRunning"
            IsPaused="_htmlPaused"
            Progress="_htmlProgress"
            ShowProgress="true"
            ShowPlayPause="true"
            ShowReset="true"
            CanPlay="!_htmlRunning"
            CanPause="_htmlRunning && !_htmlPaused"
            CanResume="_htmlPaused"
            CanReset="true"
            OnPlayClick="StartHtml"
            OnPauseClick="PauseHtml"
            OnResumeClick="ResumeHtml"
            OnResetClick="ResetHtml" />
        
        <div class="demo-preview">
            <Typewriter @ref="_htmlTypewriter"
                        Autostart="false"
                        Speed="50"
                        OnComplete="HandleHtmlComplete"
                        OnProgress="HandleHtmlProgress">
                <div>
                    <h3>Rich Content Example</h3>
                    <p>This demonstrates <strong>bold text</strong>, <em>italic text</em>, and <a href="#">clickable links</a>.</p>
                    <ul>
                        <li>List item with <code>code</code> inside</li>
                        <li>Another item with <strong>formatting</strong></li>
                        <li>Nested <em>elements</em> work perfectly</li>
                    </ul>
                    <p>You can even include <span style="color: #667eea;">colored text</span> and other inline styles.</p>
                </div>
            </Typewriter>
        </div>
    </div>
    
    <CodeSample>
        <pre><code class="language-xml">&lt;Typewriter Speed="50"&gt;
    &lt;div&gt;
        &lt;h3&gt;Rich Content Example&lt;/h3&gt;
        &lt;p&gt;This demonstrates &lt;strong&gt;bold text&lt;/strong&gt;, 
            &lt;em&gt;italic text&lt;/em&gt;, and &lt;a href="#"&gt;links&lt;/a&gt;.&lt;/p&gt;
        &lt;ul&gt;
            &lt;li&gt;List item with &lt;code&gt;code&lt;/code&gt; inside&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/Typewriter&gt;</code></pre>
    </CodeSample>
</section>

<section class="demo-section">
    <h2>RTL (Right-to-Left) Support</h2>
    <p>Full support for bidirectional text including Arabic, Hebrew, and other RTL languages.</p>
    
    <div class="player-container">
        <TypewriterControls 
            Overlay="false"
            IsRunning="_rtlRunning"
            IsPaused="_rtlPaused"
            Progress="_rtlProgress"
            ShowProgress="true"
            ShowPlayPause="true"
            ShowReset="true"
            CanPlay="!_rtlRunning"
            CanPause="_rtlRunning && !_rtlPaused"
            CanResume="_rtlPaused"
            CanReset="true"
            OnPlayClick="StartRtl"
            OnPauseClick="PauseRtl"
            OnResumeClick="ResumeRtl"
            OnResetClick="ResetRtl" />
        
        <div class="demo-preview">
            <Typewriter @ref="_rtlTypewriter"
                        Autostart="false"
                        Speed="50"
                        Dir="rtl"
                        OnComplete="HandleRtlComplete"
                        OnProgress="HandleRtlProgress">
                <div dir="rtl">
                    <h3>دعم اللغة العربية</h3>
                    <p>يدعم المكوّن <strong>النصوص العربية</strong> مع الحفاظ على الاتجاه الصحيح. يمكن دمج <a href="#">الروابط</a> والنصوص الإنجليزية مثل <code>TypeWriter</code> داخل المحتوى العربي.</p>
                    <ul>
                        <li>يدعم القوائم النقطية بالاتجاه الصحيح</li>
                        <li>يحافظ على <strong>التنسيق</strong> داخل العناصر</li>
                        <li>يعمل مع <code>الأكواد</code> والعناصر المضمنة</li>
                    </ul>
                </div>
            </Typewriter>
        </div>
    </div>
    
    <CodeSample>
        <pre><code class="language-xml">&lt;Typewriter Dir="rtl" Speed="50"&gt;
    &lt;div dir="rtl"&gt;
        &lt;p&gt;النص العربي هنا...&lt;/p&gt;
    &lt;/div&gt;
&lt;/Typewriter&gt;</code></pre>
    </CodeSample>
</section>
